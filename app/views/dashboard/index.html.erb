<script type='text/javascript' src='https://www.gstatic.com/charts/loader.js'></script>

<div class="app" id="app">

<!-- ############ LAYOUT START-->

  <!-- ############ Aside START-->
  <div id="aside" class="app-aside fade box-shadow-x nav-expand white" aria-hidden="true">
    <div class="sidenav modal-dialog dk">
      <!-- sidenav top -->
      <div class="navbar lt">
        <!-- brand -->
        <a href="../index.html" class="navbar-brand tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="Traders App">
          <svg viewBox="0 0 24 24" height="28" width="28" xmlns="http://www.w3.org/2000/svg">
              <path d="M0 0h24v24H0z" fill="none"/>
              <path d="M19.51 3.08L3.08 19.51c.09.34.27.65.51.9.25.24.56.42.9.51L20.93 4.49c-.19-.69-.73-1.23-1.42-1.41zM11.88 3L3 11.88v2.83L14.71 3h-2.83zM5 3c-1.1 0-2 .9-2 2v2l4-4H5zm14 18c.55 0 1.05-.22 1.41-.59.37-.36.59-.86.59-1.41v-2l-4 4h2zm-9.71 0h2.83L21 12.12V9.29L9.29 21z" fill="#53a6fa" class="fill-theme"/>
          </svg>
        </a>
        <!-- / brand -->
      </div>
    
     <!-- Flex nav content -->
      <div class="flex hide-scroll">
          <div class="scroll">
            <div class="nav-border b-primary" data-nav>
              <ul class="nav bg">
                
                  <% if current_user.utype == "Seller" %>
                  <li>
                  <%= link_to dashboard_index_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="Dashboard">
                  <i class="fa fa-dashboard"></i>
                  </span>
                <% end %>
                  </li>
                  

                <% end %>

                  <li>
                  <%= link_to marketplaces_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="Market Place">
                  <i class="fa fa-cart-plus"></i>
                  </span>
                <% end %>
                  </li>
         

                  <% if current_user.utype == "Seller" %>
                <li>
                  <%= link_to walk_in_index_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="Shop Sales">
                    <i class="fa fa-calculator"></i>
                    </span>
                  <% end %>
                  </li>
                   <li>
                  <%= link_to b2b_index_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="B2B Sales">
                    <i class="fa fa-ticket"></i>
                    </span>
                  <% end %>
                  </li>
         

                <% end %>
                <% if current_user.utype == "Employee" %>

                  <% if @employee.position == "Manager" %>
                  <li>
                  <%= link_to approval_index_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="Stock Approval">
                  <i class="fa fa-check"></i>
                  </span>
                <% end %>

                  </li>

                   <li>
                  <%= link_to credit_approval_index_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="Credit Approval">
                  <i class="fa fa-check-circle"></i>
                  </span>
                <% end %>

                  </li>

                  <% elsif @employee.position == "Forklift" %>
                    <li>
                  <%= link_to forklifts_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="Forklift Task">
                    <i class="fa fa-check"></i>
                    </span>
                  <% end %>

                  </li>
                  <% else %>
                    <li>
                  <%= link_to packings_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="Packing">
                      <i class="fa fa-bus"></i>
                      </span>
                    <% end %>

                  </li>
                  <% end %>
                  <% end %>
                  
                  <% if current_user.utype == "Buyer" %>
                  <li>
                  <%= link_to purchases_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Purchases">
                  <i class="fa fa-credit-card"></i>
                  </span>
                <% end %>
              </li>   
                <% end %>
                <% if current_user.utype == "Seller" %>

                <li>
                  <%= link_to offers_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Offers">
                  <i class="fa fa-leaf"></i>
                  </span>
                  </li>
                <% end %>

                   
                  <% end %>
                 
                  <% if current_user.utype == "Seller" %>

                   <li>
                  <%= link_to stocks_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Stock">
                <i class="fa fa-cube"></i>
                </span>
                </li>
                 <% end %>
                  <% end %>
                  <% if current_user.utype == "Seller" %>


                   <li>
                  <%= link_to supplies_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Supplies">
                  <i class="fa fa-barcode"></i>
                  </span>
                  </li>
                 <% end %>

                  
                  <% end %>
                  
                  <% if current_user.utype == "Seller" %>

                  <li>
                  <%= link_to credits_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Credits">
                    <i class="fa  fa-credit-card"></i>
                    </span>
                    </li>
                  <% end %>

                   
                  <% end %>
                  <% if current_user.utype == "Seller" %>
                  <li>
                  <%= link_to reports_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Reports">
                    <i class="fa fa-line-chart"></i>
                    </span>
                    </li>
                 <% end %>
                  
                  <% end %>
                  <ul class="nav ">
                
                    <li class="nav-header hidden-folded mt-2">
                      <span class="text-xs">Other Stuff</span>
                    </li>
                    <li>
                      <a>
                        <span class="nav-caret">
                          <i class="fa fa-caret-down"></i>
                        </span>
                        <span class="nav-icon tool_tip no-fade" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="Settings">
                          <i class="fa fa-cog"></i>
                        </span>
                      </a>
                      <ul class="nav-sub nav-mega nav-mega-3">
                      <% if current_user.utype == "Seller" %>
                        <li>
                          <%= link_to employees_path  do %>
                          <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Employees">
                        <i class="fa fa-snowflake-o"></i>
                        </span>
                        </li>
                        <% end %>
                    
                  <% end %>
                   <% if current_user.utype == "Seller" %>
                  <li>
                  <%= link_to networks_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Network">
                      <i class="fa fa-users"></i>
                      </span>
                      </li>
                 <% end %>

                 
                  <% end %>
                    <% if current_user.utype == "Seller" %>
                    <li>
                  <%= link_to products_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Products">
                    <i class="fa fa-snowflake-o"></i>
                    </span>
                    </li>
                 <% end %>
                    
                  <% end %>
                  
                  <% if current_user.utype == "Seller" %>


                   <li>
                  <%= link_to services_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Services">
                  <i class="fa fa-truck"></i>
                  </span>
                  </li>
                 <% end %>

                  
                  <% end %>
                       <% if current_user.utype == "Seller" %>

                  <li>
                  <%= link_to sales_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Sales">
                  <i class="fa fa-usd"></i>
                  </span>
                  </li>
                <% end %>
                 
                  <% end %>

                  <% if current_user.utype == "Seller" %>
                  <li>

                  <%= link_to claim_wastages_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="Claim Wastage">
                    <i class="fa fa-trash"></i>
                    </span>
                    </li>
                 <% end %>
                    
                  <% end %>
                         
              <% if current_user.utype == "Seller" || if current_user.utype == "Buyer" %>
                  <li>
                  <%= link_to chats_path  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Chats">
                  <i class="fa fa-commenting-o"></i>
                  </span>
                  </li>
                 <% end %>
              <%end %>
              <%end %>
                  
                 
                 

                  <% if current_user.utype == "Seller" || if current_user.utype == "Buyer" %>
                  <li>
                  
                  <% if current_user.utype == "Seller" %>
                  <% seller = Seller.where(:uid => current_user.id).first %> 
                  <%= link_to edit_seller_path(seller)  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Profile">
                  <i class="fa fa-cog"></i>
                  </span>
                  </li>
                 <% end %>
                 <% else %>
                  <% customer  = Customer.where(:uid => current_user.id).first %> 
                  <%= link_to edit_customer_path(customer)  do %>
                   <span class="nav-icon tool_tip" tabindex="0" data-toggle="tooltip" data-placement="bottom" title="My Profile">
                    <i class="fa fa-cog"></i>
                    </span>
                    </li>
                <% end %>
                <% end %>
            <% end %>
            <% end %>
                 

                  
                      </ul>
                    </li>


                  
              </ul>
            </div>
          </div>
      </div>
      
      
      <!-- sidenav bottom -->
    </div>
  </div>
  <!-- ############ Aside END-->
  <!-- ############ Content START-->
  <div id="content" class="app-content box-shadow-0" role="main">
    <!-- Header -->
      <div class="content-header white  box-shadow-0" id="content-header">
        <div class="navbar navbar-expand-lg">
          <!-- btn to toggle sidenav on small screen -->
          <a class="d-lg-none mx-2" data-toggle="modal" data-target="#aside">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512"><path d="M80 304h352v16H80zM80 248h352v16H80zM80 192h352v16H80z"/></svg>
          </a>
          <!-- Page title -->
          <div class="navbar-text nav-title flex" id="pageTitle">Dashboard</div>
        
          <ul class="nav flex-row order-lg-2">
            <!-- Notification -->
            <li class="nav-item dropdown">
              <a class="nav-link px-3" data-toggle="dropdown">
                <i class="fa fa-bell text-muted"></i>
                <span class="badge badge-pill up danger">13</span>
              </a>
              <!-- dropdown -->
             
              <!-- / dropdown -->
            </li>
   <li class="nav-item dropdown">
       <% if (current_user.utype == "Seller") %>

        <%= link_to sales_path, :class => "nav-link px-3"   do %>
                  
   <i class="fa fa-usd text-muted"></i>
                <span class="badge badge-pill up danger"></span>
    <% end %>
             

              <% end %>
  </li>
               
              <!-- dropdown -->
             
            

            <li class="nav-item dropdown">
             

        <%= link_to chats_path, :class => "nav-link px-3"   do %>
                  
   <i class="fa fa-commenting-o text-muted"></i>
                <span class="badge badge-pill up danger"></span>
    <% end %>
             

             
              
              <!-- dropdown -->
             
              <!-- / dropdown -->
            </li>

             <li class="nav-item dropdown">
              <a class="nav-link px-3" data-toggle="dropdown">
                <i class="fa  fa-male text-muted"></i>
                
              </a>
              <!-- dropdown -->
             
              <!-- / dropdown -->

            </li>
        <li class="nav-item dropdown">
       <% if (current_user.utype == "Buyer") %>

        <%= link_to cart_index_path, :class => "nav-link px-3"   do %>
                  
   <i class="fa fa-shopping-bag text-muted"></i>
                <span class="badge badge-pill up danger"><%= Cart.where(:customer_id => Customer.where(:uid => current_user.id).first.id).count %></span>
  
  </li>
                 <% end %>
             

              <% end %>
              <!-- dropdown -->
             
              <!-- / dropdown -->
              
            </li>
            </li>


        
            <!-- User dropdown menu -->
         
            <!-- Navarbar toggle btn -->
            
          </ul>
          <!-- Navbar collapse -->
          <div class="collapse navbar-collapse no-grow order-lg-1" id="navbarToggler">
          <form class="input-group m-2 my-lg-0">
             
              

              <% if user_signed_in? %>
 
  <%= link_to('<i class="fa fa-sign-in text-muted"></i>'.html_safe, destroy_user_session_path, method: :delete) %>        
 
<% else %>
 
  <%= link_to('<i class="fa fa-sign-out text-muted"></i>'.html_safe, new_user_session_path)  %>  
  
<% end %>
          </form>
          </div>
        
        </div>
      </div>
      <!-- Main -->
    <div class="content-main " id="content-main">

<!-- ############ Main START-->
<div class="padding">
    <div class="d-flex dashboard-header">
      <div class="d-flex" style="align-items:center;">
        <h2 style="margin-right:40px;">Dashboard</h2>
        <button class="btn b-a b-primary text-xxs" style="color:#53a6fa;padding: .25rem 1rem"><i class="fa fa-download" aria-hidden="true"></i> Export</button>
      </div>
      <div class="d-flex category">
        <ul class="type-categories">
          <li class="active"><i class="fa fa-th-large" style="color:#53a6fa;" aria-hidden="true"></i> Cards</li>
          <li><i class="fa fa-list" aria-hidden="true"></i> Table</li>
        </ul>
      </div>
    </div>


    <div class="row">
      <div class="col-xs-12 col-sm-3">
        <div class="b-a total-orders">
          <div style="padding: 30px;">
            <span class="text-md">Orders</span>
            <div style="margin: 20px 0;">
              <div class="d-flex" style="align-items: flex-end;color: black;"><h5>$</h5><h3>152,356</h3></div>
              <div class="d-flex" style="padding: 0 15px"><span class="flex">Amount due</span><span>Not Paid: 10</span></div>
            </div>
            <button class="d-flex blue dashboard-btn">
              <span class="flex">View all orders</span>
              <i class="fa fa-arrow-right float-right light-blue" aria-hidden="true" style="border-radius: 50%;padding: 8px;"></i>
            </button>
          </div>
          <div class="d-flex b-t" style="margin: 0;padding: 20px 30px 10px;">
              <div class="flex p-1" style="text-align: center;padding-right: 20px !important;">
                <h4>12</h4>
                <div class="progress my-1" style="height:6px;">
                    <div class="progress-bar primary" style="width: 50%"></div>
                </div>
                <span>Not approved</span>
              </div>
              <div class="flex p-1" style="text-align: center;padding-left: 20px !important;">
                <h4>6</h4>
                <div class="progress my-1" style="height:6px;">
                    <div class="progress-bar warning" style="width: 50%"></div>
                </div>
                <span>Not shipped</span>
              </div>
          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-9 d-flex b-a" style=";padding: 0;max-width: 1250px;">
        <div style="width: 70%;background-color: #fff;padding: 40px 30px 10px;">
          <div id="container" style="min-width: 310px; height: 286px; margin: 0 auto"></div>
        </div>
        <div class="b-l" style="width: 30%;background-color: #fff;">
          <div class="d-flex b-b" style="height: 200px;flex-direction: column;align-items: center;justify-content: center;">
            <span class="text-md">Offers</span>
            <div class="p-2-3" style="border-radius:50%;border: 4px dashed #ddd;margin:10px 0;">
              <div class="d-flex text-md offers-cnt">5</div>
            </div>
            <div class="d-flex" style="align-items: flex-end;"><h2 style="margin:0">28,000</h2><span class="text" style="margin:4px 8px;">Live</span></div>
          </div>
          <div class="d-flex b-b" style="height: 68px;justify-content: center;align-items: center;">
            <div class="flex text-md b-r" style="height: 100%;text-align: center;padding: 15px 0">1,260</div>
            <div class="flex text-md" style="height: 100%;text-align: center;padding: 15px 0">12,540</div>
          </div>
          <div class="d-flex b-b" style="height: 68px; justify-content: center;align-items: center;">
            <button class="d-flex blue dashboard-btn" style="width: 60%;">
              <span class="flex">View Offers</span>
              <i class="fa fa-arrow-right float-right light-blue" aria-hidden="true" style="border-radius: 50%;padding: 8px;"></i>
            </button>
          </div>
        </div>
      </div>

      <div class="col-xs-12 col-sm-3">
        
      </div>
      <div class="col-xs-12 col-sm-9 d-flex b-a" style=";padding: 0;max-width: 1250px;margin-top: 20px;">
        <div class="d-flex" style="width: 70%;background-color: #fff;padding: 40px 30px 10px;">
          <div style="width: 70%;">
            <div id="chart_div" style="width: 100%; height: 336px;"></div>
          </div>
          <div class="d-flex" style="width: 30%;flex-direction: column;padding-left: 35px;">
            <span class="_600" style="text-align: right;margin-bottom: 10px;">Show list</span>
            <div class="p-1" style="width: 100%;">
              <span>Queensland</span>
              <div class="d-flex dsh-line">
                <div class="progress my-1" style="height:6px;width:70%;">
                    <div class="progress-bar Primary" style="width: 45%"></div>
                </div>
                <span style="">45%</span>
              </div>
            </div>
            <div class="p-1" style="width: 100%;">
              <span>Western Australia</span>
              <div class="d-flex dsh-line">
                <div class="progress my-1" style="height:6px;width:70%;">
                    <div class="progress-bar light-green" style="width: 35%"></div>
                </div>
                <span>35%</span>
              </div>
            </div>
            <div class="p-1" style="width: 100%;">
              <span>New South Wales</span>
              <div class="d-flex dsh-line">
                <div class="progress my-1" style="height:6px;width:70%;">
                    <div class="progress-bar warning" style="width: 10%"></div>
                </div>
                <span>10%</span>
              </div>
            </div>
            <div class="p-1" style="width: 100%;">
              <span>Others</span>
              <div class="d-flex dsh-line">
                <div class="progress my-1" style="height:6px;width:70%;">
                    <div class="progress-bar blue-grey" style="width: 10%"></div>
                </div>
                <span>10%</span>
              </div>
            </div>
          </div>
        </div>
        <div class="b-l" style="width: 30%;background-color: #fff;">
          <div class="d-flex b-b" style="height: 100px;flex-direction: column;align-items: center;justify-content: center;">
            <div class="text">Stocks <i class="fa fa-external-link" aria-hidden="true"></i></div>
            <h4>21,2430</h4>
          </div>
          <div class="d-flex" style="height: 118px;justify-content: center;align-items: center;">
            <div class="flex b-r" style="text-align: center;padding: 5px 0">
              <span>In Stock</span><br/>
              <span class="text-md">18</span>
            </div>
            <div class="flex" style="text-align: center;padding: 5px 0">
              <span>On Hood</span><br/>
              <span class="text-md">4</span>
            </div>
          </div>
          <div class="d-flex" style="height: 118px;justify-content: center;align-items: center;">
            <div class="flex b-r" style="text-align: center;padding: 5px 0">
              <span>Out Of Stock</span><br/>
              <span class="text-md">24</span>
            </div>
            <div class="flex" style="text-align: center;padding: 5px 0">
              <span>No Of Products</span><br/>
              <span class="text-md">24</span>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>




<!-- ############ Main END-->

	    </div>
	    <!-- Footer -->
	    <div class="content-footer white " id="content-footer">
	    	<div class="d-flex p-3">
	    		<span class="text-sm text-muted flex">&copy; Copyright. Flatfull</span>
	    		<div class="text-sm text-muted">Version 1.0.2</div>
	    	</div>
	    </div>
	</div>
	<!-- ############ Content END-->

<!-- ############ LAYOUT END-->

</div>

<style>
  .dashboard-header {
    align-items: end;
    justify-content: space-between;
  }
  .dashboard-header .category {
    flex-direction: column; 
    align-items: flex-end;
  }
  .dashboard-header .category ul {
    list-style: none;
    display: flex;
    padding: 5px;
    background-color: rgb(239,244,246)
  }
  .dashboard-header .category ul li {
    padding: 7px 15px;
    cursor: pointer;
  }
  .dashboard-header .category ul li:hover {
    background: #f4f6f9;
  }
  .dashboard-header .category ul li.active {
    background: #fff;
    border-radius: 4px;
  }
  .offers-cnt {
    width:40px;
    height:40px;
    border-radius:50%;
    background-color:#fff4cc;
    align-items:center;
    justify-content:center;
    color:#ffca0e;
  }
  .total-orders {
    background-color: #fff;
    max-width: 310px;
    margin: 0 auto;
  }
  .dashboard-btn {
    width: 100%;
    align-items: center;
    padding:5px 5px 5px 10px;
    border-radius: 25px;
  }
  .dsh-line {
    align-items: center;
    justify-content: space-between;
  }
</style>

<script src="js/highcharts.js"></script>

<script>
  $('ul.type-categories li').click(function() {
    $(this).closest("ul").find("li").each(function() {
      $(this).removeClass("active");
    });
    $(this).addClass("active");
  })

  $('.tool_tip').tooltip();

  Highcharts.chart('container', {
    chart: {
        type: 'areaspline'
    },
    title: {
        text: ''
    },
     xAxis: {
          type: 'Number'
        },
    yAxis: {
        title: {
            text: ''
        },
        opposite: true
    },
    tooltip: {
        shared: true,
        valueSuffix: ' $'
    },
    credits: {
        enabled: false
    },
    plotOptions: {
        areaspline: {
            fillColor: {
                linearGradient: {
                    x1: 0,
                    y1: 0,
                    x2: 0,
                    y2: 1
                },
                stops: [
                    [0, Highcharts.getOptions().colors[0]],
                    [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                ]
            },
            marker: {
                radius: 2
            },
            lineWidth: 1,
            states: {
                hover: {
                    lineWidth: 1
                }
            },
            threshold: null
        }
    },
    series: [{
        name: 'Sales',
        data: [[2012, 3000], [2013, 4000], [2014, 3000], [2015, 5000], [2016, 4000], [2017, 10000], [2018, 12000]]
    },{
        name: 'Invoices',
        data: [[2012, 1000], [2013, 3000], [2014, 4000], [2015, 3000], [2016, 3000], [2017, 5000], [2018, 4000]]
    },{
        name: 'Profit',
        data: [[2012, 1500], [2013, 1200], [2014, 1100], [2015, 1800], [2016, 1000], [2017, 1400], [2018, 1300]]
    }]
  });

    google.charts.load('current', {
      'packages': ['geochart'],
      'mapsApiKey': 'AIzaSyCFfLsebWrh0lXVk7kYM66pbPaQrYiMQEg'
    });
    google.charts.setOnLoadCallback(drawMarkersMap);

    function drawMarkersMap() {
    var data = google.visualization.arrayToDataTable([
      ['country', 'Percentage(%)'],
      ['Queensland', 45],
      ['Western Australia', 35],
      ['Wales', 10],
      ['Others', 10]
    ]);

    var options = {
      sizeAxis: { minValue: 0, maxValue: 100 },
      //region: '142', // Western Europe
      displayMode: 'markers',
      colorAxis: {colors: ['#0173d9', '#8bc449', '#fdab29', '#5f7c8a']} 
    };

    var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  };
</script>



